# Scripts Manager Frontend

Веб-интерфейс для управления Python скриптами. Построен на React с TypeScript и Tailwind CSS.

## Требования

- Node.js >= 18.0.0
- npm или yarn

## Установка

1. Перейдите в директорию frontend:
```bash
cd frontend
```

2. Установите зависимости:
```bash
npm install
```

или с yarn:
```bash
yarn install
```

## Запуск

### Режим разработки

Запустите фронтенд в режиме разработки:

```bash
npm run dev
```

или

```bash
yarn dev
```

Приложение будет доступно по адресу: http://localhost:3000

**Важно:** Убедитесь, что бэкенд запущен на http://localhost:8000. Фронтенд автоматически проксирует запросы к `/api` на бэкенд.

### Сборка для production

Для создания production сборки:

```bash
npm run build
```

или

```bash
yarn build
```

Собранные файлы будут в директории `dist/`.

### Просмотр production сборки

После сборки вы можете просмотреть результат:

```bash
npm run preview
```

или

```bash
yarn preview
```

## Структура проекта

```
frontend/
├── src/
│   ├── api/              # API клиент для работы с бэкендом
│   │   └── client.ts
│   ├── components/       # React компоненты
│   │   ├── modals/       # Модальные окна
│   │   ├── Login.tsx     # Страница входа
│   │   ├── Register.tsx  # Страница регистрации
│   │   ├── Layout.tsx    # Основной layout
│   │   ├── ScriptsTree.tsx  # Дерево скриптов
│   │   └── ScriptViewer.tsx # Просмотр скрипта
│   ├── contexts/         # React контексты
│   │   └── AuthContext.tsx  # Контекст аутентификации
│   ├── types/           # TypeScript типы
│   │   └── api.ts
│   ├── App.tsx          # Главный компонент приложения
│   ├── main.tsx         # Точка входа
│   └── index.css        # Глобальные стили
├── index.html           # HTML шаблон
├── package.json         # Зависимости проекта
├── vite.config.ts       # Конфигурация Vite
├── tsconfig.json        # Конфигурация TypeScript
└── tailwind.config.js   # Конфигурация Tailwind CSS
```

## Основные возможности

- ✅ **Регистрация и авторизация** - JWT токены хранятся в localStorage
- ✅ **Дерево скриптов и папок** - Иерархическое отображение с возможностью раскрытия
- ✅ **Просмотр содержимого скриптов** - Отображение исходного кода
- ✅ **Создание папок и скриптов** - Модальные окна для создания
- ✅ **Редактирование** - Изменение метаданных папок и скриптов
- ✅ **Удаление** - Удаление с подтверждением
- ✅ **Права доступа** - Отображение действий в зависимости от прав (can_edit, can_delete)

## Цветовая схема

- **Основной цвет:** #0065AA (корпоративный голубой)
- **Темный вариант:** #004d80
- **Светлый вариант:** #007acc
- **Фон:** Белый и оттенки серого

## API интеграция

Фронтенд взаимодействует с бэкендом через API клиент (`src/api/client.ts`). Все запросы автоматически включают JWT токен из localStorage.

### Базовый URL

По умолчанию API запросы идут на `/api/v1`, который проксируется на `http://localhost:8000/api/v1` в режиме разработки.

### Обработка ошибок

Все ошибки API обрабатываются и отображаются пользователю. Специальная обработка для:
- `SCRIPT_EXISTS_REPLACE_REQUIRED` - запрос подтверждения перезаписи
- Ошибки валидации
- Ошибки прав доступа

## Разработка

### Добавление новых компонентов

1. Создайте компонент в `src/components/`
2. Используйте TypeScript для типизации
3. Применяйте Tailwind CSS для стилизации
4. Следуйте правилам доступности (aria-label, tabIndex)

### Работа с API

Используйте `apiClient` из `src/api/client.ts`:

```typescript
import { apiClient } from '../api/client';

// Пример
const tree = await apiClient.getTree();
```

### Стилизация

Используйте Tailwind CSS классы. Основной цвет доступен через класс `bg-primary`, `text-primary` и т.д.

## Решение проблем

### Фронтенд не подключается к бэкенду

1. Убедитесь, что бэкенд запущен на http://localhost:8000
2. Проверьте настройки прокси в `vite.config.ts`
3. Проверьте консоль браузера на наличие ошибок CORS

### Ошибки при установке зависимостей

1. Убедитесь, что используется Node.js >= 18
2. Попробуйте удалить `node_modules` и `package-lock.json`, затем переустановить:
```bash
rm -rf node_modules package-lock.json
npm install
```

### Проблемы с TypeScript

1. Убедитесь, что все типы правильно импортированы
2. Проверьте `tsconfig.json` на корректность настроек

## Лицензия

MIT

